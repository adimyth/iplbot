<html>
	<head>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
		/>
		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="/static/js/scripts.js"></script>
		<link rel="stylesheet" type="text/css" href="/static/style.css" />
	</head>

	<body onload="getDate(); getAllSchedule()">
		<div class="row">
			<div class="col s4">
				<div class="row center" style="background-color: rgba(92, 118, 255, 0.9)">
					<!-- LOGO div -->
					<div>
							<img src="/static/img/logo.svg">
							<h3 style="display: inline; font-family: UberMoveBold; color: white">
								BotVic
							</h3>
					</div>
					<!-- Today's div -->
					<div style="margin-top: 20px"></div>
					<div>
						<h3 style="font-family: UberMoveRegular; color: white; ">
							Today
						</h3>
						<h5 id="date" style="font-family: UberMoveBold; color: white;"></h5>
						<table style="color: white; font-family: UberMoveBold;">		
								<tbody>
									<tr>
										<td class="center"><img class="responsive-img" id="match_1_team_1_img"/></td>
										<td class="center" id="match_1">vs</td>
										<td class="center"><img class="responsive-img" id="match_1_team_2_img"/></td>
									</tr>
									<tr>
										<td class="center"><img class="responsive-img" id="match_2_team_1_img"/></td>
										<td class="center" id="match_2"></td>
										<td class="center"><img class="responsive-img" id="match_2_team_2_img"/></td>
									</tr>
								</tbody>
							</table>
							<h5 style="font-family: UberMoveBold; color: white;">Upcoming Matches</h5>
							<table style="color: white; font-family: UberMoveBold">		
									<tbody>
										<tr>
											<td class="center"><img id="upcoming_match_1_team_1_img"/></td>
											<td class="center" id="upcoming_match_1_timing"></td>
											<td class="center"><img id="upcoming_match_1_team_2_img"/></td>
										</tr>
										<tr>
											<td class="center"><img id="upcoming_match_2_team_1_img"/></td>
											<td class="center" id="upcoming_match_2_timing"></td>
											<td class="center"><img id="upcoming_match_2_team_2_img"/></td>
										</tr>
									</tbody>
								</table>	
					</div>
				</div>
			</div>

			<div class="col s8">
					<div id="chatbox" class="row scrollable">
						<div class='col s1'>
							<img src='/static/img/mod_logo.png' style="	width: 60px; margin-left: 20px;"> 
						</div>
						<div class="row">
							<div class='col s1'></div> 
							<div class="col s8">
									<div class="speech-bubble">
											<span>Hey there!
												I'm BotVic. 
												I can help you answer some interesting questions and facts about IPL.
												To get started, you can ask me about the current IPL champion. 
											</span>
									</div>
						</div>
					</div>
					<div class="row">
						<div class="col s7" style="position: absolute; bottom: 0px;">
								<div id="userInput" class="card" style="border-radius: 50px; z-index: 100;">
										<input id="buttonInput" type="image" style="float: right" name="action" src="/static/img/send@2x.png" alt="Send"/>	
										<div style="overflow: hidden; padding-right: .5em;">
											<input id="textInput" style="margin-left: 20px; border-bottom: #ffffff " type="text" name="msg" placeholder="Type your message here">
										</div>
									</div>	
						</div>
					</div>
					<script>
							function getBotResponse() {
								var rawText = $("#textInput").val();
								var userHtml =
								"<div class='row'> \
										<div class='col s1'></div> \
										<div class='col s8'> \
												<div class='speech-bubble' style='float:right'> \
													<span>" +
														rawText +
													"</span> \
												</div> \
										</div> \
										<div class='col s2'> \
											<img src='/static/img/profile.png' style='width: 60px; height:60px'> \
										</div> \
									</div>";

								$("#textInput").val("");
								console.log(userHtml);
								$("#chatbox").append(userHtml);
								document
									.getElementById("userInput")
									.scrollIntoView({ block: "start", behavior: "smooth" });
								$.get("/get", { msg: rawText }).done(function(data) {
									var botHtml =
										"<div class='row'> \
												<div class='col s2'> \
													<img src='/static/img/mod_logo.png' style='width: 60px; margin-left: 20px;'> \
												</div> \
												<div class='col s8'> \
													<div class='speech-bubble' style='float:left'> \
														<span>" +
																data +
														"</span> \
													</div> \
												</div> \
											</div>";
									$("#chatbox").append(botHtml);
									document
										.getElementById("userInput")
										.scrollIntoView({ block: "start", behavior: "smooth" });
								});
							}
							$("#textInput").keypress(function(e) {
								if (e.which == 13) {
									getBotResponse();
								}
							});
							$("#buttonInput").click(function() {
								getBotResponse();
							});
					</script>
					</div>
					</div>
				</div>
			</div>
		</div>
		</body>
</html>
