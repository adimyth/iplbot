<html>
	<head>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
		/>
		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="/static/style.css" />
	</head>
	<body>
		<h1>IPL Bot</h1>
		<div class="row">
			<div class="col s3"></div>
			<div class="col s12 m6 l6">
				<div class="card">
					<div class="card-content">
						<!-- SECTION 1 -->
						<div id="chatbox">
							<p class="botText">
								<span class="botText green lighten-1"
									>Hi! I'm IPL Bot.</span
								>
							</p>
						</div>

						<!-- SECTION 2 -->
						<div id="userInput">
							<input
								id="textInput"
								type="text"
								name="msg"
								placeholder="Message"
							/>
							<button
								class="btn waves-effect waves-light"
								type="submit"
								name="action"
							>
								Send
							</button>
						</div>

						<script>
							function getBotResponse() {
								var rawText = $("#textInput").val();
								var userHtml =
									'<p class="userText"><span class="light-blue lighten-2">' +
									rawText +
									"</span></p>";
								$("#textInput").val("");
								$("#chatbox").append(userHtml);
								document
									.getElementById("userInput")
									.scrollIntoView({
										block: "start",
										behavior: "smooth"
									});
								$.get("/get", { msg: rawText }).done(function(
									data
								) {
									var botHtml =
										'<p class="botText"><span class="green lighten-1">' +
										data +
										"</span></p>";
									$("#chatbox").append(botHtml);
									document
										.getElementById("userInput")
										.scrollIntoView({
											block: "start",
											behavior: "smooth"
										});
								});
							}
							$("#textInput").keypress(function(e) {
								if (e.which == 13) {
									getBotResponse();
								}
							});
							$("#buttonInput").click(function() {
								getBotResponse();
							});
						</script>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
