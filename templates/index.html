<html>
	<head>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
		/>
		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="/static/style.css" />
	</head>

	<body>
		<div class="row">
			<div class="col s3"></div>
			<div class="col s12 m6">
				<div class="card">
					<h1>
						IPL BOT
					</h1>
						<div id="chatbox">
						<img src="https://i.ibb.co/fYP4ndG/waving-hand-sign-1f44b-1.png">
						<p>
								<span>Hi there! I'm IPL Bot</span>
							</p>
					</div>
					<div id="userInput" class="card-action">
						<input id="textInput" type="text" name="msg" placeholder="Message">
						<button class="btn waves-effect waves-light" type="submit" name="action">Send</button>
					</div>
							<script>
								function getBotResponse() {
									var rawText = $("#textInput").val();
									var userHtml = '<div class="speech-bubble-ds-right"> <p><span>' + rawText + '</span></p><div class="speech-bubble-ds-arrow-right"></div></div>';
									$("#textInput").val("");
									$("#chatbox").append(userHtml);
									document.getElementById('userInput').scrollIntoView({block: 'start', behavior: 'smooth'});
									$.get("/get", { msg: rawText }).done(function(data) {

										var botHtml = "<div class='row'> \
												<div class='col s1'></div> \
												<div class='col s1'> \
													<img src='https://i.ibb.co/fYP4ndG/waving-hand-sign-1f44b-1.png'> \
												</div> \
												<div class='col s9'> \
													<div class='speech-bubble-ds-left'> \
														<p><span>" + data + "</span></p> \
													<div class='speech-bubble-ds-arrow-left'></div> \
												</div> \
											</div>"
										$("#chatbox").append(botHtml);
										document.getElementById('userInput').scrollIntoView({block: 'start', behavior: 'smooth'});
									});
								}
								$("#textInput").keypress(function(e) {
										if(e.which == 13) {
												getBotResponse();
										}
								});
								$("#buttonInput").click(function() {
									getBotResponse();
								})
							</script>
						</div>				
				</div>
			</div>
		</div>
		</body>
</html>
